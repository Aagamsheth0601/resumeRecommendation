<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous" />

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- Title -->
	<title>Company Profile</title>
</head>

<body>
	<div class="container">
		<div style="text-align:right; padding-top: 20px">
			<a class="btn btn-primary" href="/logoutcompany">Logout</a>
		</div>
		<div class="text-center">
			<a class="btn btn-primary" href="/companyJobRequirement">Upload Job Requirements</a>
			<a class="btn btn-primary" href="/searchuser">Search for Users</a>
		</div>
		<p style="font-size: 20px; font-family: serif, georgia">
			Name : <b>{{user.name}}</b>
		</p>
		<p style="font-size: 20px; font-family: serif, georgia">
			Email : <b>{{user.username}}</b>
		</p>
	</div>
	<hr />
	<br /><br /><br />



	<div class="container">
		{% if companyfavourite %}
		<h1>Your favourites</h1>
		<table class="table">
			<thead>
				<tr>
					<th>
						Name
					</th>
					<th>
						Position
					</th>
					<th>
						Resume
					</th>
					<th>
						Favorite
					</th>
				</tr>
			</thead>
			<tbody>
				{% for i in companyfavourite %}
				{% set user = userdetailsincompanyfavourite(i.usersno) %}
				<tr id="tr{{user.sno}}">
					<td>{{user.name}}</td>
					<td style="font-weight: bold">
						{% if user.position %}
						{{user.position}}
						{% else %}
						No Details
						{% endif %}
					</td>
					<td>
						{% if user.resume %}

						<a href="static/resumes/{{user.resume}}" class="btn btn-primary" target="__blank">
							View resume
						</a>
						{% else %}
						No Resume
						{% endif %}
					</td>
					<td>
						<style>
							.btn-check:focus+.btn,
							.btn:focus {
								outline: 0;
								box-shadow: none;
							}
						</style>
						<div id="deletefavourite{{user.sno}}">
							<form class="deletefavourite" id="{{user.sno}}">
								<input type="hidden" name="usersno" value="{{user.sno}}">
								<button type="submit" class="btn" class="update_form">
									<i type="submit" class="fa fa-star" style="color: yellow;font-size: 30px;"></i>
								</button>
							</form>
						</div>
					</td>
				</tr>

				{% endfor %}
			</tbody>
		</table>
		{% endif %}
	</div>



	<!-- Optional JavaScript; choose one of the two! -->

	<!-- Option 1: Bootstrap Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
		crossorigin="anonymous"></script>

	<!-- Option 2: Separate Popper and Bootstrap JS -->
	<!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script>
		$(document).ready(function () {
			$(".deletefavourite").on('submit', (function (e) {
				e.preventDefault();
				var id = $(this).attr('id');
				$.ajax({
					url: "/deletecompanyfavourite",
					type: "POST",
					data: new FormData(this),
					contentType: false,
					cache: false,
					processData: false,
					success: function (data) {
						$("#tr" + id).hide();
					}
				});
			}));
		});
	</script>
</body>

</html>